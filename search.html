<!DOCTYPE html>
<!--[if IEMobile 7]><html class="iem7 no-js" lang="en" dir="ltr"><![endif]-->
<!--[if lt IE 7]><html class="lt-ie9 lt-ie8 lt-ie7 no-js" lang="en" dir="ltr"><![endif]-->
<!--[if (IE 7)&(!IEMobile)]><html class="lt-ie9 lt-ie8 no-js" lang="en" dir="ltr"><![endif]-->
<!--[if IE 8]><html class="lt-ie9 no-js" lang="en" dir="ltr"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)]><!--> <html class="no-js not-oldie" lang="en" dir="ltr"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="true" />
  <link rel="shortcut icon" href="https://www.epa.gov/sites/all/themes/epa/favicon.ico" type="image/vnd.microsoft.icon" />
  <meta name="MobileOptimized" content="width" />
  <meta http-equiv="cleartype" content="on" />
  <meta http-equiv="ImageToolbar" content="false" />
  <meta name="viewport" content="width=device-width" />
  <meta name="version" content="20161218" />
<!--googleon: all-->
  <meta name="DC.description" content="" />
  <meta name="DC.title" content="" />
  <title>SHCRP | Tools & Inventory | US EPA</title>
<!--googleoff: snippet-->
  <meta name="keywords" content="" />
  <link rel="shortlink" href="" />
  <link rel="canonical" href="" />
  <meta name="DC.creator" content="" />
  <meta name="DC.language" content="en" />
  <meta name="DC.Subject.epachannel" content="" />
  <meta name="DC.type" content="" />
  <meta name="DC.date.created" content="" />
  <meta name="DC.date.modified" content="" />
<!--googleoff: all-->
  <link type="text/css" rel="stylesheet" href="https://www.epa.gov/sites/all/libraries/template2/s.css" media="all" />
  <link href="css/read.css" rel="stylesheet" type="text/css">
  <link href="css/jquery-ui.min.css" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><link type="text/css" rel="stylesheet" href="https://www.epa.gov/sites/all/themes/epa/css/ie.css" media="all" /><![endif]-->
  <link rel="alternate" type="application/atom+xml" title="EPA.gov All Press Releases" href="https://www.epa.gov/newsreleases/search/rss" />
  <link rel="alternate" type="application/atom+xml" title="EPA.gov Headquarters Press Releases" href="https://www.epa.gov/newsreleases/search/rss/field_press_office/headquarters" />
  <link rel="alternate" type="application/atom+xml" title="Greenversations, EPA's Blog" href="https://blog.epa.gov/blog/feed/" />
  <!--[if lt IE 9]><script src="https://www.epa.gov/sites/all/themes/epa/js/html5.js"></script><![endif]-->
  <style>
  #tabs-nav{padding:0}
  /* don't initially display "no results returned from search" */
  #simpleFeedback {
    display: none;
    background-color: rgb(221, 206, 204);
  }
  /* make results responsive */
  .result-row:hover {
    background-color: #e7f4e4;
    cursor: pointer;
  }
  #detailed-search-feedback { display:none; }
  /************* ADDED FROM MOCKUP.HTML ************/
  button:disabled { 
    background-color: #aeb0b5;
  }
    @media screen and (min-width: 45em), print and (min-width: 45em) {
      .row > .size-95of100.col {
        width: 95%;
      }
    }
    .expand:hover{
      background-color: #e7f4e4;
      cursor: pointer;
    }
    .expand{
      margin: 0;
    }
    .list-div{
      background-color: #f1f1f1;
      margin-top: .5em;
      border-radius: 5px;
      padding: 2px;
    }
    [role=tab]{
      margin: 1px 0 0;
      border-bottom-left-radius:0;
      border-bottom-right-radius:0;
    }
    [role=tabpanel]{
      padding: .5em;
      border: 2px solid #d6d7d9;
      border-radius: 5px;
      border-top-left-radius:0;
      border-top-right-radius:0;
    }
    [aria-hidden="true"]{
      display: none;
    }
    .result-label{
      display: inline;
      background-color:transparent;
    }
    .tool-label:focus + label{
      background-color:#e1f3f8;
    }
    .tool-label:checked + label{
      background-color:#d6d7d9;
    }
    /* Makes text in an element unselectable */
    .unselectable{
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -o-user-select: none;
      user-select: none;
    }
    button:disabled{background-color:#aeb0b5}
    *{
      -ms-transition: none;
      transition: none;
    }
    .accordian-result{
    background-image: url(https://www.epa.gov/sites/all/themes/epa/img/arrow-alt-down.png);
    background-repeat: no-repeat;
    float: right;
    height: 13px;
    margin: 5px;
    width: 13px;
    }
    .collapsible{
      transform: rotateX(180deg);
    }
    .tabs, .tabs > li{
      margin-bottom: 0;
      border: none;
    }
    hr {
      border: .5em solid #d6d7d9;
      border-radius: 1em;
      height: 0;
    }
    .bold {
      font-weight: bold;
    }
  </style>
</head>
<body class="node-type-web-area microsite" >
  <!-- Google Tag Manager -->
  <!--REMOVED FOR DEVELOPMENT; REPLACE FOR PRODUCTION
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-L8ZB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-L8ZB');</script>
  -->
  <!-- End Google Tag Manager -->
  <div class="skip-links"><a href="#main-content" class="skip-link element-invisible element-focusable">Jump to main content</a></div>
  <header class="masthead clearfix" role="banner">
    <img class="site-logo" src="https://www.epa.gov/sites/all/themes/epa/logo.png" alt="" />
    <hgroup class="site-name-and-slogan">
      <h1 class="site-name"><a href="https://www.epa.gov/" title="Go to the home page" rel="home"><span>US EPA</span></a></h1>
      <div class="site-slogan">United States Environmental Protection Agency</div>
    </hgroup>
    <form class="epa-search" method="get" action="https://search.epa.gov/epasearch/epasearch">
      <label class="element-hidden" for="search-box">Search</label>
      <input class="form-text" placeholder="Search EPA.gov" name="querytext" id="search-box" value=""/>
      <button class="epa-search-button" id="search-button" type="submit" title="Search">Search</button>
      <input type="hidden" name="areaname" value="" />
      <input type="hidden" name="areacontacts" value="" />
      <input type="hidden" name="areasearchurl" value="" />
      <input type="hidden" name="typeofsearch" value="epa" />
      <input type="hidden" name="result_template" value="2col.ftl" />
    </form>
  </header>
  <section id="main-content" class="main-content clearfix" role="main">
    <div class="region-preface clearfix">
      <div id="block-pane-epa-web-area-connect" class="block block-pane contextual-links-region">
        <ul class="menu utility-menu">
          <li class="menu-item"><a href="{CONTACT URL}" class="menu-link contact-us">Contact Us</a></li>
        </ul>
      </div>
    </div>
    <div class="main-column clearfix">
<!--googleon: all-->
      <h1 class="page-title">Search The Inventory of Tools</h1>
      <div class="panel-pane pane-node-content" >
        <div class="pane-content">
          <div class="node node-page clearfix view-mode-full">
            <h2 id="page-description-title" class="title">Description</h2>
            <p>Explore tools that help produce results while preserving resources. Exploration can be searching for text in tools' descriptions or browsing all tools.</p>
            <h2 id="disclaimer-title">Disclaimer</h2>
            <p id="disclaimer-text">The tools listed are for informational purposes only. The EPA and its employees do not endorse any product, services, or organizations listed.</p>
            <div id="tabs">
              <ul class="tabs" id="tabs-nav" role="tablist">
                <li><a aria-controls="simple-search-panel" aria-selected="true" class="menu-internal" data-tab-number="1" href="#simple-search-panel" id="simple-search-tab" name="tab1" role="tab">Simple Search</a></li>
                <li ><a aria-controls="detailed-search-panel" aria-selected="false" class="menu-internal" data-tab-number="2" href="#detailed-search-panel" id="detailed-search-tab" name="tab1" role="tab">Detailed Search</a></li>
                <li><a aria-controls="browse-tools-panel" aria-selected="false" class="menu-internal" data-tab-number="3" href="#browse-tools-panel" id="browse-tools-tab" name="tab1" role="tab" onclick="loadModels2()">Browse Tools</a></li>
                <li aria-hidden="true"><a aria-controls="results-panel" aria-selected="false" class="menu-internal" data-tab-number="4" href="#results-panel" id="results-tab" name="tab1" role="tab">Results</a></li>
                <li aria-hidden="true"><a aria-controls="selected-tool-panel" aria-selected="false" class="menu-internal" data-tab-number="5" href="#selected-tool-panel" id="selected-tool-tab" name="tab1" role="tab">Selected Tool</a></li>
                <li aria-hidden="true"><a aria-controls="saved-tools-panel" aria-selected="false" class="menu-internal" data-tab-number="6" href="#saved-tools-panel" id="saved-tools-tab" name="tab1" role="tab">Saved Tools</a></li>
              </ul>
              <div aria-hidden="false" aria-labelledby="simple-search-tab" id="simple-search-panel" role="tabpanel" style="border: 1px solid #aaa;">
                <h3>Search</h3>
                <p>Find tools by entering words to search for then using the <strong>Search</strong>-button. The search returns each tool whose title, acronym, or description contains all of these words. Results are displayed when found. A notification is displayed when no results are found.</p>
                <hr />
                <label for="simple-search-text" id="simple-search-text-label">Enter words to search for.</label>
                <input autocomplete="off" class="ui-autocomplete-input" id="simpleSearchText" aria-labelledby="simple-search-text-label" onkeydown="if (event.keyCode == 13) document.getElementById('simpleSearchBtn').click()"  title="Search for tools by entering specific keywords" type="text">
                <button id="simpleSearchBtn" onclick="simpleSearch()">Search</button>
                <p id="simpleFeedback">No tools were found.</p>
              </div>
              <div aria-hidden="true" aria-labelledby="detailed-search-tab" id="detailed-search-panel" role="tabpanel">
                <h3>Detailed Search</h3>
                <p>Specify requirements of tools while searching for words contained in the tools' titles, acronyms, or descriptions.</p>
                <hr />
                <form>
                  <div aria-labelledby="decision-sector-label" class="form-item form-type-checkbox" id="decision-select" role="group">
                    <h4 id="decision-sector-label">Choose decision-sectors to find only tools in those decision-sectors.</h4>
                    <input class="form-checkbox" id="decision-sector-building" type="checkbox" value="building infrastructure" />
                    <label class="option" for="decision-sector-building">building and infrastructure</label>
                    <input class="form-checkbox" id="decision-sector-land" type="checkbox" value="land use" />
                    <label class="option" for="decision-sector-land">land use</label>
                    <input class="form-checkbox" id="decision-sector-transportation" type="checkbox" value="transportation" />
                    <label class="option" for="decision-sector-transportation">transportation</label>
                    <input class="form-checkbox" id="decision-sector-waste" type="checkbox" value="waste management" />
                    <label class="option" for="decision-sector-waste">waste management</label>
                  </div>
                  <div aria-labelledby="operating-environment-label" class="form-item form-type-checkbox" id="operating-environment-select" role="group">
                    <h4 id="operating-environment-label">Choose operating environments to search only for tools labelled with one of those operating environments.</h4>
                    <input class="form-checkbox" id="radioenvironment_desktop" name="radioenvironment" type="checkbox" value="desktop" />
                    <label class="option" for="radioenvironment_desktop">desktop</label>
                    <input class="form-checkbox" id="radioenvironment_browser" name="radioenvironment" type="checkbox" value="browser" />
                    <label class="option" for="radioenvironment_browser">browser</label>
                    <input class="form-checkbox" type="checkbox" name="radioenvironment" id="radioenvironment_mobile" value="mobile" />
                    <label class="option" for="radioenvironment_mobile">mobile</label>
                  </div>
                  <div aria-labelledby="cost-label" class="form-item form-type-checkbox" id="cost-select" class="group">
                    <h4 id="cost-label">Choose cost-ranges to find only tools labelled with one of those cost-ranges.</h4>
                    <input class="form-checkbox" id="checkbasefree" name="checkbase" type="checkbox" value="1" />
                    <label class="option" for="checkbasefree">free</label>
                    <input id="checkbasefree"id="checkbase1" name="checkbase" type="checkbox" value="2" />
                    <label class="option" for="checkbase1">$1-$499</label>
                    <input id="checkbase1"id="checkbase500" name="checkbase" type="checkbox" value="3" />
                    <label class="option" for="checkbase500">$500-$1499</label>
                    <input id="checkbase500"id="checkbase1500" name="checkbase" type="checkbox" value="4" />
                    <label class="option" for="checkbase1500">$1500-$3999</label>
                    <input id="checkbase1500"id="checkbase4000" name="checkbase" type="checkbox" value="5" />
                    <label class="option" for="checkbase4000">&gt;$4000</label>
                  </div>
                  <div aria-labelledby="extent-label" id="extent-select" class="form-item form-type-checkbox" class="group">
                    <h4 id="extent-label" >Choose spatial extents to find only tools labelled with at least one chosen spatial extent.</h4>
                    <input class="form-checkbox" id="extent-building" type="checkbox" value="building">
                    <label class="option" for="extent-building">building</label>
                    <input class="form-checkbox" id="extent-site" type="checkbox" value="site">
                    <label class="option" for="extent-site">site</label>
                    <input class="form-checkbox" id="extent-neighborhood" type="checkbox" value="neighborhood">
                    <label class="option" for="extent-neighborhood">neighborhood</label>
                    <input class="form-checkbox" id="extent-city" type="checkbox" value="city">
                    <label class="option" for="extent-city">city</label>
                    <input class="form-checkbox" id="extent-county" type="checkbox" value="county">
                    <label class="option" for="extent-county">county</label>
                    <input class="form-checkbox" id="extent-state" type="checkbox" value="state">
                    <label class="option" for="extent-state">state</label>
                    <input class="form-checkbox" id="extent-nation" type="checkbox" value="nation">
                    <label class="option" for="extent-nation">nation</label>
                    <input class="form-checkbox" id="extent-continent" type="checkbox" value="continent">
                    <label class="option" for="extent-continent">continent</label>
                    <input class="form-checkbox" id="extent-globe" type="checkbox" value="globe">
                    <label class="option" for="extent-globe">globe</label>
                  </div>
                  <div id="detailed-search-feedback">no results were found.</div>
                  <button id="detailed-reset" type="reset">Reset Selected Requirements</button>
                </form>
                <label for="detailed-search-text">
                <input autocomplete="off" class="ui-autocomplete-input" id="detailed-search-text" onkeyup="if (event.keyCode == 13) document.getElementById('detailed-search-button').click()" title="search for tools by matching words" type="text">
                <button id="detailed-search-button" onclick="detailedSearch()" type="">Search</button>
              </div>
              <div aria-labelledby="browse-tools-tab" id="browse-tools-panel" role="tabpanel" aria-hidden="true">
                <h3>Browse the Tools by Decision Sector</h3>
                <p>Each tool is in a single decision-sector. Expand a decision-sector below to browse its tools.</p>
                <hr />
                <span>Choose a display type:</span>
                <input id="browse-list-radio" type="radio" name="browse-display-type" value="text" checked><label for="browse-list-radio">Text</label>
                <input id="browse-table-radio" type="radio" name="browse-display-type" value="table"><label for="browse-table-radio">Table</label>
                <div class="accordion" id="accordion">
                  <h4 class="accordion-title"><a>Building and Infrastructure</a></h4>
                  <div class="accordion-pane" id="browseBuildingInfrastructure" style="display: none;">
                    <div class="browse-table-div" aria-hidden="true">
                      <button class="button" onclick="saveAllRecords('building-infrastructure-table')">Save All</button>
                      <table class="revision-table" id="building-infrastructure-table" width="100%">
                        <thead>
                          <tr>
                            <th>Acronym</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Base Cost</th>
                            <th>Spatial Extent</th>
                            <th>Tool Inputs</th>
                            <th>Tool Outputs</th>
                          </tr>
                        </thead>
                        <tbody></tbody>
                      </table>
                    </div>
                    <div class="browse-list-div">
                      <button onclick="selectAll('land-use-list')">Select All</button>
                      <button onclick="deselectAll('land-use-list')">Deselect All</button>
                      <button onclick="saveSelectedRecords('land-use-list')">Save Selected Tools</button>
                      <div id="land-use-list"></div>
                    </div>
                  </div>
                  <h4 class="accordion-title"><a>Land Use</a></h4>
                  <div class="accordion-pane" id="browseLand" style="display: none;">
                    <div class="browse-table-div" aria-hidden="true">
                      <button class="button" onclick="saveAllRecords('land-use-table')">Save All</button>
                      <table class="revision-table" id="land-use-table" width="100%">
                        <thead>
                          <tr>
                            <th>Acronym</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Base Cost</th>
                            <th>Spatial Extent</th>
                            <th>Tool Inputs</th>
                            <th>Tool Outputs</th>
                          </tr>
                        </thead>
                        <tbody></tbody>
                      </table>
                    </div>
                    <div class="browse-list-div">
                      <button onclick="selectAll('transportation-list')">Select All</button>
                      <button onclick="deselectAll('transportation-list')">Deselect All</button>
                      <button onclick="saveSelectedRecords('transportation-list')">Save Selected Tools</button>
                      <div id="transportation-list"></div>
                    </div>
                  </div>
                  <h4 class="accordion-title"><a>Transportation</a></h4>
                  <div class="accordion-pane" id="browseTransportation" style="display: none;">
                    <div class="browse-table-div" aria-hidden="true">
                      <button class="button" onclick="saveAllRecords('transportation-table')">Save All</button>
                      <table class="revision-table" id="transportation-table" width="100%">
                        <thead>
                          <tr>
                            <th>Acronym</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Base Cost</th>
                            <th>Spatial Extent</th>
                            <th>Tool Inputs</th>
                            <th>Tool Outputs</th>
                          </tr>
                        </thead>
                       <tbody></tbody>
                      </table>
                    </div>
                    <div class="browse-list-div">
                      <button onclick="selectAll('waste-management-list')">Select All</button>
                      <button onclick="deselectAll('waste-management-list')">Deselect All</button>
                      <button onclick="saveSelectedRecords('waste-management-list')">Save Selected Tools</button>
                      <div id="waste-management-list"></div>
                    </div>
                  </div>
                  <h4 class="accordion-title"><a>Waste Management</a></h4>
                  <div class="accordion-pane" id="browseWasteManagement" style="display: none;">
                    <div class="browse-table-div" aria-hidden="true">
                      <button class="button" onclick="saveAllRecords('waste-management-table')">Save All</button>
                      <table class="revision-table" id="waste-management-table" width="100%">
                        <thead>
                          <tr>
                            <th>Acronym</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Base Cost</th>
                            <th>Spatial Extent</th>
                            <th>Tool Inputs</th>
                            <th>Tool Outputs</th>
                          </tr>
                        </thead>
                       <tbody></tbody>
                      </table>
                    </div>
                    <div class="browse-list-div">
                      <button onclick="selectAll('waste-management-list')">Select All</button>
                      <button onclick="deselectAll('waste-management-list')">Deselect All</button>
                      <button onclick="saveSelectedRecords('waste-management-list')">Save Selected Tools</button>
                      <div id="waste-management-list"></div>
                    </div>
                  </div>
                
                </div>
              </div>
              <div aria-labelledby="results-tab" id="results-panel" role="tabpanel" aria-hidden="true">
                <span>Choose a display type:</span>
                <input id="list-radio" type="radio" name="display-type" value="text" checked><label for="list-radio">Text</label>
                <input id="table-radio" type="radio" name="display-type" value="table"><label for="table-radio">Table</label>
                <div id="results-list-div">  
                  <button onclick="selectAll('results-list')">Select All</button>
                  <button onclick="deselectAll('results-list')">Deselect All</button>
                  <button onclick="saveSelectedRecords('results-list')">Save Selected Tools</button>
                  <div id="results-list"></div>
                </div>
                <div aria-hidden="true" id="results-table-div">
                  <p>Your search results:</p>
                  <button class="button" onclick="saveAllRecords('results-table')">Save All</button>
                  <button class="button" onclick="exportAllCSV('results-list')">Export CSV</button>
                  <table class="revision-table" id="results-table" width="100%">
                    <thead>
                      <tr>
                        <th>Acronym</th>
                        <th>Title</th>
                        <th>Description</th>
                        <th>Base Cost</th>
                        <th>Spatial Extent</th>
                        <th>Tool Inputs</th>
                        <th>Tool Outputs</th>
                      </tr>
                    </thead>
                       <tbody></tbody>
                  </table>
                </div>
              </div>
              <div aria-labelledby="selected-tool-tab" id="selected-tool-panel" role="tabpanel" aria-hidden="true">
                <button class="button" onclick="saveRecord()">Save Record</button>
                <div id="selected-tool"></div>
              </div>
              <div aria-labelledby="saved-tools-tab" id="saved-tools-panel" role="tabpanel" aria-hidden="true">
                <h3>Saved Tools</h3>
                <p>These are the tools you chose to save.</p>
                <p>Select the tools you would like to export to a downloadable CSV file.</p><hr />
                <span>Choose a display type:</span>
                <input id="saved-list-radio" type="radio" name="saved-display-type" value="text" checked><label for="saved-list-radio">Text</label>
                <input id="saved-table-radio" type="radio" name="saved-display-type" value="table"><label for="saved-table-radio">Table</label>
                <div id="saved-list-div">
                  <button onclick="selectAll('saved-list')">Select All</button>
                  <button onclick="deselectAll('saved-list')">Deselect All</button>
                  <button onclick="removeSelected('saved-list')">Remove Selected Tools</button>
                  <button onclick="exportCSV('saved-list')">Export Selected Tools to CSV</button>
                  <div id="saved-list"></div>
                </div>
                <div aria-hidden="true" id="saved-table-div">
                  <p>Your saved results:</p>
                  <button class="button" onclick="clearSaved('saved-list')">Clear Saved</button>
                  <button class="button" onclick="exportAllCSV('saved-list')">Export CSV</button>
                  <table class="revision-table" id="saved-table" width="100%">
                    <thead>
                      <tr>
                        <th>Acronym</th>
                        <th>Title</th>
                        <th>Description</th>
                        <th>Base Cost</th>
                        <th>Spatial Extent</th>
                        <th>Tool Inputs</th>
                        <th>Tool Outputs</th>
                      </tr>
                    </thead>
                       <tbody></tbody>
                  </table>
                </div>
                <p class="pagetop"><a href="#tabs">Return to top of section</a></p>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="block-epa-og-footer" class="block block-epa-og">
    <p></p>
  </div>
<!--googleoff: all-->
  </section>
  <nav class="nav simple-nav simple-main-nav" role="navigation">
    <div class="nav__inner">
      <h2 class="element-invisible">Main menu</h2>
      <ul class="menu" role="menu">
        <li class="menu-item" id="menu-learn" role="presentation"><a href="https://www.epa.gov/environmental-topics" title="Learn about Environmental Topics that EPA covers." class="menu-link" role="menuitem">Environmental Topics</a></li>
        <li class="menu-item" id="menu-lawsregs" role="presentation"><a href="https://www.epa.gov/laws-regulations" title="Laws written by Congress provide the authority for EPA to write regulations. Regulations explain the technical, operational, and legal details necessary to implement laws." class="menu-link" role="menuitem">Laws &amp; Regulations</a></li>
        <li class="menu-item" id="menu-about" role="presentation"><a href="https://www.epa.gov/aboutepa" title="Learn more about: our mission and what we do, how we are organized, and our history." class="menu-link" role="menuitem">About EPA</a></li>
      </ul>
    </div>
  </nav>
  <footer class="main-footer clearfix" role="contentinfo">
    <div class="main-footer__inner">
      <div class="region-footer">
        <div class="block block-pane block-pane-epa-global-footer">
          <div class="row cols-3">
            <div class="col size-1of3">
              <div class="col__title">Discover.</div>
              <ul class="menu">
                <li><a href="https://www.epa.gov/accessibility">Accessibility</a></li>
                <li><a href="https://www.epa.gov/aboutepa/administrator-gina-mccarthy">EPA Administrator</a></li>
                <li><a href="https://www.epa.gov/planandbudget">Budget &amp; Performance</a></li>
                <li><a href="https://www.epa.gov/contracts">Contracting</a></li>
                <li><a href="https://www.epa.gov/home/grants-and-other-funding-opportunities">Grants</a></li>
                <li><a href="https://www.epa.gov/ocr/whistleblower-protections-epa-and-how-they-relate-non-disclosure-agreements-signed-epa-employees">No FEAR Act Data</a></li>
                <li><a href="https://www.epa.gov/home/privacy-and-security-notice">Privacy and Security</a></li>
              </ul>
            </div>
            <div class="col size-1of3">
              <div class="col__title">Connect.</div>
              <ul class="menu">
                <li><a href="https://www.data.gov/">Data.gov</a></li>
                <li><a href="https://www.epa.gov/office-inspector-general/about-epas-office-inspector-general">Inspector General</a></li>
                <li><a href="https://www.epa.gov/careers">Jobs</a></li>
                <li><a href="https://www.epa.gov/newsroom">Newsroom</a></li>
                <li><a href="https://www.whitehouse.gov/open">Open Government</a></li>
                <li><a href="http://www.regulations.gov/">Regulations.gov</a></li>
                <li><a href="https://www.epa.gov/newsroom/email-subscriptions">Subscribe</a></li>
                <li><a href="https://www.usa.gov/">USA.gov</a></li>
                <li><a href="https://www.whitehouse.gov/">White House</a></li>
              </ul>
            </div>
            <div class="col size-1of3">
              <div class="col__title">Ask.</div>
              <ul class="menu">
                <li><a href="https://www.epa.gov/home/forms/contact-us">Contact Us</a></li>
                <li><a href="https://www.epa.gov/home/epa-hotlines">Hotlines</a></li>
                <li><a href="https://www.epa.gov/foia">FOIA Requests</a></li>
                <li><a href="https://www.epa.gov/home/frequent-questions-specific-epa-programstopics">Frequent Questions</a></li>
              </ul>
              <div class="col__title">Follow.</div>
              <ul class="social-menu">
                <li><a class="menu-link social-facebook" href="https://www.facebook.com/EPA">Facebook</a></li>
                <li><a class="menu-link social-twitter" href="https://twitter.com/epa">Twitter</a></li>
                <li><a class="menu-link social-youtube" href="https://www.youtube.com/user/USEPAgov">YouTube</a></li>
                <li><a class="menu-link social-flickr" href="https://www.flickr.com/photos/usepagov">Flickr</a></li>
                <li><a class="menu-link social-instagram" href="https://instagram.com/epagov">Instagram</a></li>
              </ul>
              <p class="last-updated">This page was last updated on 2017.03.22.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://www.epa.gov/sites/all/libraries/template2/jquery.js"></script>
  <script src="https://www.epa.gov/sites/all/libraries/template2/js.js"></script>
  <script src="https://www.epa.gov/sites/all/modules/custom/epa_core/js/alert.js"></script>
  <link rel="stylesheet" href="https://www.epa.gov/sites/all/libraries/js/datatables/media/css/jquery.dataTables.min.css">
  <script src="https://www.epa.gov/sites/all/libraries/js/datatables/media/js/jquery.dataTables.min.js"></script>
  <script src="https://www.epa.gov/sites/all/libraries/js/datatables/extras/Responsive/js/dataTables.responsive.min.js"></script>
  <!--[if lt IE 9]><script src="https://www.epa.gov/sites/all/themes/epa/js/ie.js"></script><![endif]-->
  <script src="js/base.js"></script>
<script>
$ = jQuery;// ensure jquery gets where it's expected
var resourceSearchURL = "https://ofmpub.epa.gov/readwebservices/v1/ResourceSearch";
var resourceAdvancedSearchURL = "https://ofmpub.epa.gov/readwebservices/v1/ResourceAdvancedSearch";
var resourceDetailURL = "https://ofmpub.epa.gov/readwebservices/v1/ResourceDetail";
// do fn on document's ready
$(function() { // jquery's shorthand awaits readiness of document
  initializeTabs();// initialize tabs and their listeners
  $("#results-table").DataTable({
    responsive: true
  });
  $("#saved-table").DataTable({
    responsive: true
  });
});

// DOCUMENT
var initializeTabs = function() {
  $('#tabs > div').hide(); // hide all tab-panels
  $('#tabs div:first').show(); // show first tab-panel
  $('#tabs-nav li:first').addClass('active'); // class tabs active for styling
  $('.menu-internal').click(function(){ // add listener to tabbing elements
    $('#tabs-nav li').removeClass('active'); // remove active styling from all tabs
    var currentTab = $(this).attr('href'); // get name of clicked tab
    $('#tabs-nav li a[href="'+currentTab+'"]').parent().addClass('active'); // activate the clicked tab
    $('#tabs > div').hide(); // hide all panels
    $(currentTab).show(); // show clicked tab's panel
    return false;// return false for success; conventionially return truthy description of failure
  });
};

/**
 * Expand an array of data-objects to add a member of name
 * fieldName for each value from fieldValues.
 * This allows expansion of an array of data-objects for
 * each selected value from fieldValues.
 * EXAMPLE:
 * dataList = addMembers(dataList, 'Operating Environment', os_select);
 * this example creates an element of dataArray for each (i, j) where
 * i = someCurrentDataObject, j = someFieldValue) 
 */
function addMembers(dataList, fieldName, fieldValues) {
  if (fieldValues.length > 0) {// are any values selected?
    var tmpDataList = [];// create a temp copy of dataList
    for (iFieldValue=0;iFieldValue<fieldValues.length;iFieldValue++) {// loop through os-selections
      for (var iDatum in dataList) {// loop through current data-objects
        // expand the temp object to be num_osSelections * num_previousDataObjects
        tmpDataList[fieldValues.length * iDatum + iFieldValue] = dataList[iDatum];
        // add member for value of fieldValues
        tmpDataList[fieldValues.length * iDatum + iFieldValue][fieldName] = fieldValues[iFieldValue];
      }
    }
    return tmpDataList;
  } else {
    return dataList;
  }
}

/**
 * Search for text and choose other criteria for tools.
 */
var detailedSearch = function() {
  //clear result table
  $('#results-table').DataTable().clear().draw();
  //clear result div
  $('#results-list *').remove(); //clears for new results
  //clear result set
  resultSet.reset();
  var queryString = $('#detailed-search-text').val().trim().toLowerCase();
  var decisionSectors = $('#decision-select :checkbox:checked').map(function(){return $(this).val();});
  var queryTypes = ["Acronym", "Name", "ShortDescriptionForReports"];
  var $feedbackDiv = $('#detailed-search-feedback');
  var os_select = checkBoxValue(document.getElementsByName('RadioEnvironment'));
  var cost_select = checkBoxValue(document.getElementsByName('CheckBase'));
  var extent_select = $('#extent-select :checkbox:checked').map(function(){return $(this).val()});
  var extent_select = $('#detail-extent-checkbox :checkbox:checked').map(function(){return $(this).val()});
  var results = [];
  var requests = [];
  var data = {};
  $feedbackDiv.css('display','none');
  if (!decisionSectors[0]) { // makes sure decisionSector string is not empty
    decisionSectors = [
      "Land Use",
      "Waste Management",
      "Building Infrastructure",
      "Transportation"
    ];
  }
  if (queryString) { // ensure search string is not empty
    for (var i=0;i<queryTypes.length;i++){
      data[queryTypes[i]] = queryString;
      for (var j=0;j<decisionSectors.length;j++){
        data.DecisionSector = decisionSectors[j];
        // create an initial array of query-data
        dataList = [data];
        // create a data object for each selection of OperatingEnvironment
        dataList = addMembers(dataList, 'OperatingEnvironment', os_select);
        // create a data object for each selection of BaseCostOfSoftware
        dataList = addMembers(dataList, 'BaseCostOfSoftware', cost_select);
        // create a data object for each selection of SpatialExtent
        dataList = addMembers(dataList, 'SpatialExtent', extent_select);
        for (var iDatum in dataList) {
          requests.push(executeSearch(resourceAdvancedSearchURL, dataList[iDatum]));
        }
      }
      data = {};
    }
    /*
      .apply allows for variable parameters stored in an array
      .when then waits for the array of promises to be resolved
      .done then executes when all those promises are resolved
      arguments allows for the variable number of arguments to be accessed
    */
    $.when.apply(null, requests).done(function () {
      for (var i=0; i<arguments.length; i++){
        results = results.concat(arguments[i][0]);
      }
      var numberOfResults = parseResultsArray(results);
      if (0 === numberOfResults) {
        $feedbackDiv.css('display', 'block');
        $('#results-tab').parent().attr('aria-hidden',true);
      }else{
        $feedbackDiv.css('display', 'none');
        $('#results-tab').parent().attr('aria-hidden',false);
        $("#results-tab").click();
      }
    });
  }else{
    $feedbackDiv.css('display', 'block');
  }
};

var executeSearch = function(url, data){
  return $.ajax({
    type: 'GET',
    url: url,
    data: data
  });
};

var parseResultsArray = function(results) {
  for (var i = 0; i < results.length; i++) {
    //turn into function in base?
    if(!resultSet.contains(results[i].ResourceId)) {
      resultSet.addTool(results[i].ResourceId);
      //populate divs
      toolCache.handleParsedData(results[i].ResourceId, resultTable.displayTool.bind(resultTable));
    }
  }
  return resultSet.getLength();
};

simpleSearch = function() {
  //clear result table
  $('#results-table').DataTable().clear().draw();
  //clear result list
  $('#results-list *').remove(); //clears for new results
  //clear result data
  resultSet.reset();
  var queryString = $('#simpleSearchText').val().trim().toLowerCase();
  //var decisionSectors = [$('#simpleDecisionSelect').val()];
  var queryTypes = ["Acronym", "Name", "ShortDescriptionForReports"];
  var $feedbackDiv = $('#simpleFeedback');
  var results = [];
  var requests = [];
  var data = {};
  var decisionSectors = [
      "Land Use",
      "Waste Management",
      "Building Infrastructure",
      "Transportation"
    ];
  if (queryString) { // ensure search-string is not empty
    for (var i=0;i<queryTypes.length;i++){
      data[queryTypes[i]] = queryString;
      for (var j=0;j<decisionSectors.length;j++){
        data.DecisionSector = decisionSectors[j];
        requests.push(executeSearch(resourceAdvancedSearchURL, data));
      }
      data = {};
    }
    $.when.apply(null, requests).done(function () {
      for (var i=0; i<arguments.length; i++){
        results = results.concat(arguments[i][0]);
      }
      var numberOfResults = parseResultsArray(results);
      if (0 === numberOfResults) {
        $feedbackDiv.css('display', 'block');
        $('#results-tab').parent().attr('aria-hidden',true);
      }else {
        $feedbackDiv.css('display', 'none');
        $('#results-tab').parent().attr('aria-hidden',false);
        $("#results-tab").click();
      }
    });
  } else {
    $feedbackDiv.css('display', 'block');
  }
};

/**
 * display details of parsedResult in container with containerId
 * dev aspiration: dynamically append spans and dynamically apply
 *                 .left class or .right class to each in order
 *                 to balance columns
 */
function addDiv(parsedResult, containerId) {
  // append READ-ID of a tool to URL below to point to details via the EPA's System of Registries 
  var prefixForExternalDetails = 'https://ofmpub.epa.gov/sor_internet/registry/systmreg/resourcedetail/general/description/description.do?infoResourcePkId=';
  var container = $('#'+containerId);
  $(container).append(
    $('<div />')
      .attr('id', containerId+'-'+parsedResult.READResourceIdentifier)
      .addClass('list-div')
      .append(
        $('<div />')
          .addClass('row')
          .attr('role','button')// ensure accessibility of details
          .append(
            $('<div />')
              .html('<input class="result-checkbox" type="checkbox" id="'+containerId+'-cb-'+parsedResult.READResourceIdentifier+'" value="'+parsedResult.READResourceIdentifier+'"/><label for="'+containerId+'-cb-'+parsedResult.READResourceIdentifier+'" class="result-label"></label><span class="bold">'+parsedResult.LongTitleText+' ('+parsedResult.Acronym+')</span>: '+parsedResult.LongDescription)
              .addClass('col size-95of100')))
      .append(
        $('<div />')
          .addClass('row expand')
          .attr('tabindex','0')// ensure inclusion in tab-order based on position in document(default order)
          .click(function() {
            $("#additional-details-"+containerId+'-'+parsedResult.READResourceIdentifier).toggle();
            $("#additional-details-"+containerId+'-'+parsedResult.READResourceIdentifier).is(":visible") ? $('#expand-message'+containerId+'-'+parsedResult.READResourceIdentifier).html('Hide tool details...') : $('#expand-message'+containerId+'-'+parsedResult.READResourceIdentifier).html('Show tool details...');
            $(this).find('.accordian-result').toggleClass('collapsible');
          })
          .append(
            $('<span />')
              .attr('id', 'expand-message'+containerId+'-'+parsedResult.READResourceIdentifier)
              .html('Show tool details...')
              .addClass('col bold'))
          .append(
          $('<div />')
            .css('float','right')
            .addClass('col')
            .addClass('accordian-result')))
      .append(
        $('<div />')
          .css('display', 'none')
          .attr('id', 'additional-details-'+containerId+'-'+parsedResult.READResourceIdentifier)
          .addClass('row')
          .append(
            $('<div />')    
              .addClass('col size-1of2')
              .append($('<span />').html('<span class="bold">Contact Name</span>: '+parsedResult.UserSupportName+'<br />'))
              .append($('<span />').html('<span class="bold">Contact Email</span>: '+parsedResult.UserSupportEmail+'<br />'))
              .append($('<span />').html('<span class="bold">URL</span>: '+parsedResult.URLText+'<br />'))
              .append($('<span />').html('<span class="bold">Internet Help Desk Phone</span>: '+parsedResult.HelpDeskPhoneNumber+'<br />'))
              .append($('<span />').html('<span class="bold">Internet Help Desk Email</span>: '+parsedResult.HelpDeskEmailAddressText+'<br />'))
              .append($('<span />').html('<span class="bold">Lifecycle Phase</span>: '+parsedResult.CurrentLifeCyclePhase+'<br />'))
              .append($('<span />').html('<span class="bold">Last Modified</span>: '+parsedResult.LastModifiedDateTimeText+'<br />'))
              .append($('<span />').html('<span class="bold">Last Modified By</span>: '+parsedResult.LastModifiedPersonName+'<br />'))
              .append($('<span />').html('<span class="bold">Operating Environment</span>: '+parsedResult.OperatingEnvironmentName+'<br />'))
              .append($('<span />').html('<span class="bold">Operating System</span>: '+parsedResult.OSName+'<br />'))
              .append($('<span />').html('<span class="bold">Other Technical Requirements</span>: '+parsedResult.OtherReqName+'<br />'))
              .append($('<span />').html('<span class="bold">Model Inputs</span>: '+parsedResult.ModelInputsTextArea+'<br />'))
              .append($('<span />').html('<span class="bold">Model Outputs</span>: '+parsedResult.ModelOutputsModelVariablesTextArea+'<br />'))
              .append($('<span />').html('<span class="bold">External Details</span>: <a href="'+prefixForExternalDetails+parsedResult.READResourceIdentifier+'" target="_blank">View Details Externally</a><br />')))
          .append(
            $('<div />')
              .addClass('col size-1of2')
              .append($('<span />').html('<span class="bold">Keywords</span>: '+parsedResult.KeywordText+'<br />'))
              .append($('<span />').html('<span class="bold">Tags</span>: '+parsedResult.InfoResourceStewardTagText+'<br />'))
              .append($('<span />').html('<span class="bold">Alternative Names</span>: '+parsedResult.DetailsOtherCostConsiderations+'<br />'))
              .append($('<span />').html('<span class="bold">Intranet Address</span>: '+parsedResult.intranetUrl+'<br />'))
              .append($('<span />').html('<span class="bold">Intranet Help Desk Phone</span>: '+parsedResult.intranetHelpDeskPhone+'<br />'))
              .append($('<span />').html('<span class="bold">Intranet Help Desk Email</span>: '+parsedResult.intranetHelpDeskEmail+'<br />'))
              .append($('<span />').html('<span class="bold">Revision Control</span>: '+parsedResult.RCSResourcess+'<br />'))
              .append($('<span />').html('<span class="bold">Ownership</span>: '+parsedResult.OwnershipTypeName+'<br />'))
              .append($('<span />').html('<span class="bold">Software Cost</span>: '+parsedResult.DetailsBaseSoftwareCost+'<br />'))
              .append($('<span />').html('<span class="bold">Other Cost</span>: '+parsedResult.DetailsOtherCostConsiderations+'<br />'))
              .append($('<span />').html('<span class="bold">Open Source</span>: '+parsedResult.DetailsOpenSource+'<br />'))
              .append($('<span />').html('<span class="bold">Decision Sector</span>: '+parsedResult.ModelScopeDecisionSector+'<br />'))
              .append($('<span />').html('<span class="bold">Support Materials</span>: '+parsedResult.UserSupportSourceOfSupportMaterials+'<br />'))
              .append($('<span />').html('<span class="bold">Model Evaluation</span>: '+parsedResult.ModelEvaluationTextArea+'<br />'))
              .append($('<span />').html('<span class="bold">Model Time Scale</span>: '+parsedResult.ModelScopeTimeScaleDetail+'<br />'))
              .append($('<span />').html('<span class="bold">Spatial Extent</span>: '+parsedResult.ModelScopeSpatialExtentDetail+'<br />'))
              .append($('<span />').html('<span class="bold">Data Requirements</span>: '+parsedResult.ModelInputsDataRequirements+'<br />'))
          )
      )
  );
}

/**
 * map details of a result into accessible locations
 */
var parseResult = function(result) {

  /**
   * return decoded value(s) accumulated into a string
   * @param field{object} contains either object[propertyName] or object[0][propertyName]
   * @param propertyName{string} name of the property that holds the desired value
   * @param map{object} decode values with map[object[propertyName]] or map[object[0][propertyName]]
   * READ Web Services return one value if only one value exists. If several values then they're in an array.
   * There are various data-standards used in READ, like storing integers in place of strings for options.
  */
  function mapAll(field, propertyName, map) {
    if (typeof propertyName != 'undefined') {// arg propertyName passed?
      if (field[propertyName]) {return map[field[propertyName]];}// money-shot!
      if (field.length) {
        var accumulatedString = '';// append accumulated values here
        for (var i = 0; i < field.length - 1; i++) {
          if (typeof map === 'undefined') {// no arg map passed...
            accumulatedString += field[i][propertyName] + ', ';// ...accumulate ith value
          } else {// arg map was passed...
            accumulatedString += map[field[i]][propertyName] + ', ';// ...accumulate ith value
          }
        }
        if (typeof map === 'undefined') {// no arg map passed...
          accumulatedString += 'and ' + field[field.length - 1][propertyName];// ...accumulate final value
        } else {// arg map was passed...
          accumulatedString += 'and ' + map[field[field.length - 1][propertyName]];// ...accumulate final value
        }
        return accumulatedString;
      }
    } else {// no arg propertyName
      if (field) {return field;}
      if (field.length) {
        var accumulatedString = '';// append accumulated values here
        for (var i = 0; i < field.length - 1; i++) {
          if (typeof map === 'undefined') {// no arg map passed...
            accumulatedString += field[i] + ', ';// ...accumulate ith value
          } else {// arg map was passed...
            accumulatedString += map[field[i]] + ', ';// ...accumulate ith value
          }
        }
        if (typeof map === 'undefined') {// no arg map passed...
          accumulatedString += 'and ' + field[field.length - 1][propertyName];// ...accumulate final value
        } else {// arg map was passed...
          accumulatedString += 'and ' + map[field[field.length - 1][propertyName]];// ...accumulate final value
        }
        return accumulatedString;
      }
    }
  }

  // decode spatial extent
  function parseSpatialExtent(extent) {// possibly joins strings in an array
    if (extent.SpatialExtentName) {return extent.SpatialExtentName;}// return desired value if it is a property of extent
    if (extent.length) {// is array?(this means several values instead of just one)
      if (typeof extent === 'string') {return extent;}
      var str = '';// create string for appending each spatial extent to while looping through array
      for (var i = 0; i < extent.length - 1; i++) {// loop through all elements except last...
        if(extent.length > 2){
          str += parseSpatialExtent(extent[i]) + ", ";//...append ith value and a delimiter. comma if more than 2 in list
        } else {
          str += parseSpatialExtent(extent[i]) + " ";//...append ith value and a delimiter just a space if only 2 in list
        }
      }
      str += 'and ' + parseSpatialExtent(extent[extent.length - 1]);//append final value
      return str; // return accumulated values in a string
    }
  }

  // decode information about licensure
  function parseOpenSource(openSource) {
    return openSourceMap[openSource];
  }// requires decoding a data-standard; will be mapped in parseResult.DetailsOpenSourceMap[INTEGER]

  // decode whether data is needed to use the tool
  function parseDataRequirements(dataRequirements) {// requires decoding a data-standard
    return dataRequirementsMap[dataRequirements];// do work
  }

  // decode cost of software
  function parseSoftwareCost(softwareCost) {// requires decoding a data-standard
    if (softwareCostMap.hasOwnProperty(softwareCost)){
      return softwareCostMap[softwareCost];// do work
    } else {
      return "No Data";
    }
  }

  // decode timescale
  function parseTimeScale(timeScale) {//all that apply
    if (timeScale.TimeScaleName) {return timeScale.TimeScaleName}// return value if possible
    if (timeScale.length) {
      if (typeof timeScale === 'string') {return timeScale}// if it's a string then return it
      var timeStr = '';
      for (var i=0;i<timeScale.length-1;i++) {// loop through all elements except last...
        timeStr += timeScale[i].TimeScaleName;//...append ith value and a delimiter
        if (timeScale.length > 2) {timeStr += ','}// append comma when appropriate
        timeStr += ' ';
      }
      if (timeScale.length > 2) {timeStr += 'and '}// append 'and ' when appropriate
      timeStr += timeScale[i].TimeScaleName;//append final value from array
      return timeStr; // return accumulated values in string
    }
  }

  // catch possible array of multiple values
  function parseOperatingEnvironment(operatingEnvironment) {//all that apply
    if (operatingEnvironment.OperatingEnvironmentName) {return operatingEnvironment.OperatingEnvironmentName}
    if (operatingEnvironment.length) {
      if (typeof operatingEnvironment === 'string') {return operatingEnvironment}// return if string
      var operatingEnvironmentStringing = '';
      for (var i=0;i<operatingEnvironment.length-1;i++) {// loop through all elements except last...
        operatingEnvironmentString += operatingEnvironment[i].OperatingEnvironmentName;//...append ith value and a delimiter
        if (operatingEnvironment.length > 2) {operatingEnvironmentString += ','}// append comma when appropriate
        operatingEnvironmentString += ' ';
      }
      if (operatingEnvironment.length > 2) {operatingEnvironmentString += 'and '}// append 'and ' when appropriate
      operatingEnvironmentString += operatingEnvironment[i].OperatingEnvironmentName;//append final value from array
      return operatingEnvironmentString; // return accumulated values in string
    }
  }

  // define variables used by procedures
  if(typeof(result)=='undefined') {return;}// catch bad input
  var openSourceMap = {// map integral data-standard to text
    1:'Yes',
    2:'No',
    3:'Partial'
  };
  var dataRequirementsMap = {// map integral data-standard to text
    1:'All data is provided.',
    2:'Data is publicly available.',
    3:'Data is not publicly available but routinely available.',
    4:'New data must be created.'
  };
  var softwareCostMap = {// map integral data-standard to text
    1:'Free',
    2:'$1-$499',
    3:'$500-$1499',
    4:'$1500-$3999',
    5:'>$4000'
  };

  // procedures
  var parsedResult = {};
  parsedResult.READResourceIdentifier = readSafe(result,['READExportDetail','InfoResourceDetail','READResourceIdentifier']);
  parsedResult.LongTitleText = readSafe(result,['READExportDetail','InfoResourceDetail','GeneralDetail','LongTitleText']);
  parsedResult.Acronym = readSafe(result,['READExportDetail','InfoResourceDetail','GeneralDetail','Acronym']);
  parsedResult.LongDescription = readSafe(result,['READExportDetail','InfoResourceDetail','GeneralDetail','LongDescription']);
  parsedResult.UserSupportName = readSafe(result,['READExportDetail','InfoResourceDetail','UserSupportDetail','UserSupportName']);
  parsedResult.UserSupportEmail = readSafe(result,['READExportDetail','InfoResourceDetail','UserSupportDetail','UserSupportEmail']);
  parsedResult.UserSupportPhoneNumber = readSafe(result,['READExportDetail','InfoResourceDetail','UserSupportDetail','UserSupportPhoneNumber']);
  parsedResult.KeywordText = readSafe(result,['READExportDetail','InfoResourceDetail','KeywordDetail','KeywordText']);
  parsedResult.InfoResourceStewardTagText = readSafe(result,['READExportDetail','InfoResourceDetail','TagDetail','InfoResourceStewardTagText']);
  parsedResult.URLText = readSafe(result,['READExportDetail','InfoResourceDetail','AccessDetail','InternetDetail','URLText']);
  parsedResult.HelpDeskEmailAddressText = readSafe(result,['READExportDetail','InfoResourceDetail','AccessDetail','InternetDetail','HelpDeskEmailAddressText']);
  parsedResult.HelpDeskPhoneNumber = readSafe(result,['READExportDetail','InfoResourceDetail','AccessDetail','InternetDetail','HelpDeskPhoneNumber']);
  parsedResult.RCSResources = readSafe(result,['READExportDetail','InfoResourceDetail','AccessDetail','RCSDetail','RCSResources']);
  parsedResult.OwnershipTypeName = readSafe(result,['READExportDetail','InfoResourceDetail','GeneralDetail','OwnershipTypeName']);
  parsedResult.DetailsBaseSoftwareCost = parseSoftwareCost(readSafe(result,['READExportDetail','InfoResourceDetail','ModelDetailsDetail','DetailsBaseSoftwareCost']));
  parsedResult.DetailsOtherCostConsiderations = readSafe(result,['READExportDetail','InfoResourceDetail','ModelDetailsDetail','DetailsOtherCostConsiderations']);
  parsedResult.DetailsOpenSource = parseOpenSource(readSafe(result,['READExportDetail','InfoResourceDetail','ModelDetailsDetail','DetailsOpenSource']));
  parsedResult.DetailsLastKnownSoftwareUpdate = readSafe(result,['READExportDetail','InfoResourceDetail','ModelDetailsDetail','DetailsLastKnownSoftwareUpdate']);
  parsedResult.ModelScopeDecisionSector = readSafe(result,['READExportDetail','InfoResourceDetail','ModelScopeDetail','ModelScopeDecisionSector']);
  parsedResult.UserSupportSourceOfSupportMaterials = readSafe(result,['READExportDetail','InfoResourceDetail','UserSupportDetail','UserSupportSourceOfSupportMaterials']);
  parsedResult.CurrentLifeCyclePhase = readSafe(result,['READExportDetail','InfoResourceDetail','LifeCycleDetail','CurrentLifeCyclePhase']);
  parsedResult.LastModifiedDateTimeText = readSafe(result,['READExportDetail','InfoResourceDetail','LastModifiedDateTimeText']);
  parsedResult.LastModifiedPersonName = readSafe(result,['READExportDetail','InfoResourceDetail','LastModifiedPersonName']);
  parsedResult.OperatingEnvironmentName = readSafe(result,['READExportDetail','InfoResourceDetail','TechRequirementsDetail','TechReqOperatingEnvironmentDetail','OperatingEnvironmentName']);
  parsedResult.OSName = readSafe(result,['READExportDetail','InfoResourceDetail','TechRequirementsDetail','TechReqCompatibleOSDetail','OSName']);
  parsedResult.OtherReqName = readSafe(result,['READExportDetail','InfoResourceDetail','TechRequirementsDetail','TechReqOtherReqDetail','OtherReqName']);
  parsedResult.ModelInputsTextArea = readSafe(result,['READExportDetail','InfoResourceDetail','ModelInputsDetail','ModelInputsTextArea']);
  parsedResult.ModelOutputsModelVariablesTextArea = readSafe(result,['READExportDetail','InfoResourceDetail','ModelOutputsDetail','ModelOutputsModelVariablesTextArea']);
  parsedResult.ModelEvaluationTextArea = readSafe(result,['READExportDetail','InfoResourceDetail','ModelEvaluationDetail','ModelEvaluationTextArea']);
  parsedResult.ModelScopeTimeScaleDetail = parseTimeScale(readSafe(result,['READExportDetail','InfoResourceDetail','ModelScopeDetail','ModelScopeTimeScaleDetail']));
  parsedResult.ModelScopeSpatialExtentDetail = parseSpatialExtent(readSafe(result,['READExportDetail','InfoResourceDetail','ModelScopeDetail','ModelScopeSpatialExtentDetail']));
  parsedResult.ModelInputsDataRequirements = parseDataRequirements(readSafe(result,['READExportDetail','InfoResourceDetail','ModelInputsDetail','ModelInputsDataRequirements']));
  return parsedResult;
};

/**
 * check existence of each prop_i in obj.prop_1...prop_n
 * @param object{object} test the properties of object
 * @param propertyArray{array} [prop_1,...,prop_n] s.t.
 *      object[prop_1][...][prop_n] is the desired value
 * E.G.: readSafe(obj,['foo','bar','baz'])
 * safely returns obj.foo.bar.baz value if all properties exist
*/
function readSafe(object, propertyArray) {
  if(object[propertyArray[0]]) {// is first element of propertyArray a property of this object?
    if (Object.prototype.toString.call(object[propertyArray[0]])==='[object Array]'){console.log('found an array:',object,propertyArray)}
    var value = validata(object[propertyArray[0]]);// oft-used value is sensibly extant
    if(Object.keys(propertyArray).length==1) {// is this the last property in the array?
      return value;// return contents of property
    }else{// there are multiple elements remaining in propertyArray that we need to descend into
      try{
        // recursion with obj[prop_1] as obj for next iteration
        return readSafe(value,propertyArray.slice(1));// pass the second element through the last element of the property array
      }catch(e) {
        console.log('error: ',e);// dev
      }
    }
  }else{//fail: element zero of propertyArray isn't a property of this object
    return 'no data'; // fail safely: return 'no data'
  }
}

/**
 * clear results and their cached ids
 */
var clearResultData = function(div) {
  var container = $('#'+div);
  var ids = container.data('ids');
  if (typeof(ids) != 'undefined') {
    for (var i=0;i<ids.length;i++) {
      var id = ids[i];
      container.removeData(id);
    }
    ids.length = 0;
  }
};

/**
 * check if object represents xsi:nil or unsanitized absence of data
 */
var isNil = function(obj) {
  return Boolean(
      typeof(obj)==='undefined'||
      obj.hasOwnProperty('xsi:nil')||
      obj===null||
      obj===''||
      obj==='no data'
  );
};

/**
 * return 'no data' if obj is invalid data
 * return obj otherwise
 */
var validata = function(obj) {
  try{
    if(isNil(obj)) {
      return 'no data';
    }else{
      return obj;
    }
  }catch(e) {
    console.log('caught this error while parsing: ',e);
    return 'no data';
  }
};
//END TAG EXTRACT READ-INTERFACE INTO EXTERNAL FILE TO AVOID CODE-DUPLICATION AND SERVER-LOAD

//Load Models
var tabsBrowserClicked = false;
function loadModels2() {
  if (tabsBrowserClicked === false) {
    $(".accordion-pane").each(function() {
        var table;
        var table_name = this.children[0].children[1].id;
        switch (table_name) {
          case "building-infrastructure-table":
            decision_query = "Building Infrastructure";
            table = buildingInfrastructureTable;
            break;
          case "land-use-table":
            decision_query = "Land Use";
            table = landUseTable;
            break;
          case "transportation-table":
            decision_query = "Transportation";
            table = transportationTable;
            break;
          case "waste-management-table":
            decision_query = "Waste Management";
            table = wasteManagementTable;
            break;
          default:
            return;
        }
        $.ajax({
          type: 'GET',
          url: resourceAdvancedSearchURL,
          data: {
            DecisionSector: decision_query,
            Format: 'JSON'
          },
          dataType: 'json',
          success: function(data) {
            for (i = 0; i < data.length; i++) {
              toolCache.handleParsedData(data[i].ResourceId, table.displayTool.bind(table));
            }
          }
        });
      });
  }
  tabsBrowserClicked = true;
}

/**
 * Check all the checkboxes in the specified location
*/
function selectAll(divID) {
  var $selected = $('#'+divID +' input');
  var count = $selected.length;
  $selected.each(function(){
    $(this).prop("checked", true);
    if (--count === 0){
      $(this).change();
    }
  });
}

/**
 * Uncheck all the checkboxes in the specified location
*/
function deselectAll(divID) {
  var $selected = $('#'+divID +' input');
  var count = $selected.length;
  $selected.each(function(){
    $(this).prop("checked", false);
    if (--count === 0){
      $(this).change();
    }
  });
}
</script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/read.js"></script>
</body>
</html>
